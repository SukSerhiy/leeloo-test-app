(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,n){e.exports=n(373)},135:function(e,t,n){},140:function(e,t,n){},363:function(e,t,n){},369:function(e,t,n){},373:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"sum",function(){return L}),n.d(r,"avarage",function(){return I}),n.d(r,"concat",function(){return k}),n.d(r,"hyperlink",function(){return w});var a=n(0),o=n.n(a),u=n(6),l=n.n(u),c=n(22),i=n(33),s=n(119),d=n(120),f=n(121),p=n(16),C=function(e,t,n){return e.findIndex(function(e){return e.get("xCoord")===t&&e.get("yCoord")===n})},y=Object(f.combineReducers)({simpleReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIMPLE_ACTION":return{result:t.payload};default:return e}},focusedCell:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FOCUS":return t.payload;case"REMOVE_FOCUS":return null;default:return e}},cellValues:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CELL_VALUE":var n=t.payload,r=n.xCoord,a=n.yCoord,o=n.value,u=n.dataType,l=C(e,r,a);return-1!==l?e.update(l,function(){return e.get(l).set("value",o).set("dataType",u)}):e.push(Object(p.Map)(t.payload));case"SET_FORMULA":var c=t.payload,i=c.xCoord,s=c.yCoord,d=c.type,f=C(e,i,s);return e.update(f,function(){return e.get(f).set("formula",Object(p.Map)({type:d,arguments:Object(p.List)([])}))});case"SET_FORMULA_ARGUMENTS":var y=t.payload,m=y.xCoord,E=y.yCoord,v=y.arguments,h=C(e,m,E);return e.update(h,function(){return e.get(h).setIn(["formula","arguments"],v)});default:return e}},formulaEnteringCell:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FORMULA_ENTERING_CELL":var n=t.payload,r=n.xCoord,a=n.yCoord;return Object(p.Map)({xCoord:r,yCoord:a});case"UNSET_FORMULA_ENTERING_CELL":return null;default:return e}}}),m=p.default.fromJS({focusedCell:null,cellValues:[],formulaEnteringCell:null});n(135);var E=n(54),v=n(55),h=n(58),g=n(56),O=n(59),A=n(41),S=function(e){return function(t){t({type:"SET_FOCUS",payload:e})}},T=function(){return function(e){e({type:"REMOVE_FOCUS"})}},b=function(e){return function(t){t({type:"SET_CELL_VALUE",payload:e})}},N=function(e){return function(t){t({type:"SET_FORMULA",payload:e})}},R=function(e){return function(t){t({type:"SET_FORMULA_ARGUMENTS",payload:e})}},M=function(e){return function(t){t({type:"SET_FORMULA_ENTERING_CELL",payload:e})}},V=function(){return function(e){e({type:"UNSET_FORMULA_ENTERING_CELL"})}},U={SUM:"SUM",AVERAGE:"AVERAGE",CONCAT:"CONCAT",HYPERLINK:"HYPERLINK"},x=[{key:"NUMBER",value:"Number"},{key:"STRING",value:"String"},{key:"MONEY_SUMM",value:"Money summ"},{key:"HYPERLINK",value:"Hyperlink"}],j=n(57),_=n.n(j),F=function(e,t,n){return e.find(function(e){return e.xCoord===t&&e.yCoord===n})},L=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return+e+ +t})},I=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return+e+ +t})/t.length},k=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e+t},"")},w=function(e){return e},G=/^=(SUM|AVARAGE|CONCAT|HYPERLINK)\(([A-Z]+\d+,\s?)*[A-Z]+\d+\)$/,D=function(e){return+e?"NUMBER":"STRING"},B=function(e,t){var n=e.map(function(e){return e.dataType});switch(t){case U.SUM:case U.AVERAGE:if(n.every(function(e){return"NUMBER"===e})||n.every(function(e){return"MONEY_SUM"===e}))return!0;break;case U.CONCAT:return!0;default:return!1}},P=function(e,t){var n=e.map(function(e){return e.dataType});switch(t){case U.SUM:case U.AVERAGE:if(n.every(function(e){return"NUMBER"===e}))return"NUMBER";if(n.every(function(e){return"MONEY_SUM"===e}))return"MONEY_SUM";break;case U.CONCAT:return"STRING";default:return null}},Y=function(e,t){switch(e){case U.SUM:return L.apply(r,Object(A.a)(t));case U.AVERAGE:return I.apply(r,Object(A.a)(t));case U.CONCAT:return k.apply(r,Object(A.a)(t));case U.HYPERLINK:return w.apply(r,Object(A.a)(t));default:return null}},K=function(e){console.error(e),function(e){_.a.error(e,{position:"bottom-right",effect:"slide",timeout:"none"})}(e)},H=function(e){function t(e){var n;return Object(E.a)(this,t),(n=Object(h.a)(this,Object(g.a)(t).call(this,e))).state={value:null,dataType:null,formulaArgs:null,focused:!1},n.handleCellFocus=function(){if(n.props.formulaEnteringCell){var e=n.props.formulaEnteringCell,t=e.xCoord,r=e.yCoord,a=n.props,o=a.xCoord,u=a.yCoord,l=a.setFormulaArguments,c=n.props.cellValues,i=F(c,t,r).formula.arguments;if(t!==o||r!==u)l({yCoord:r,xCoord:t,arguments:i.concat({xCoord:o,yCoord:u})})}else{var s=n.props,d=s.yCoord,f=s.xCoord;(0,s.setFocus)({yCoord:d,xCoord:f}),n.setState({focused:!0},function(){n.inputRef.current.focus()})}},n.handleCellBlur=function(){n.props.formulaEnteringCell?n.state.focused&&n.inputRef.current.focus():n.setState({focused:!1})},n.handleInputChange=function(e){var t=e.target.value,r=n.state.dataType,a=n.props,o=a.xCoord,u=a.yCoord,l=a.setCellValue,c=a.setFocus,i=a.setFormulaEnteringCell,s=a.unsetFormulaEnteringCell,d=a.setFormula,f=a.setFormulaArguments;if(r||(r=D(t)),c({yCoord:u,xCoord:o}),l({xCoord:o,yCoord:u,dataType:r,value:t}),n.setState({value:t,dataType:r}),/^=SUM/.test(t)||/^=AVARAGE/.test(t)||/^=CONCAT/.test(t)){var p=t.match(/SUM|AVARAGE|CONCAT/),C=p&&p[0];if(n.props.formulaEnteringCell||(i({xCoord:o,yCoord:u,type:C}),d({xCoord:o,yCoord:u,type:C})),G.test(t))f({yCoord:u,xCoord:o,arguments:t.match(/[A-Z]\d/g).map(function(e){return{xCoord:e.match(/[A-Z]/g).reduce(function(e,t){return e+t}),yCoord:+e.match(/\d/g).reduce(function(e,t){return e+t})}})})}else n.props.formulaEnteringCell&&s(),l({xCoord:o,yCoord:u,dataType:r,value:t})},n.handleKeyPress=function(e){var t=n.props,r=t.formulaEnteringCell,a=t.cellValues,o=t.xCoord,u=t.yCoord,l=t.setCellValue,c=t.unsetFormulaEnteringCell,i=t.removeFocus,s=n.state.value;if(13===e.charCode&&r){if(G.test(s)){var d=F(a,o,u).formula,f=d.arguments,p=d.type,C=f.map(function(e){return F(a,e.xCoord,e.yCoord)}).filter(function(e){return e});if(B(C,p)){var y=C.map(function(e){return e.value}),m=P(C,p),E=Y(p,y);l({xCoord:o,yCoord:u,dataType:m,value:E}),n.setState({value:E})}else K("Incorrect data types of arguments")}else K("Incorrect syntax for being a formula");c(),i(),n.setState({focused:!1})}},n.inputRef=o.a.createRef(),n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.state.focused&&e.formulaEnteringCell&&this.props.formulaEnteringCell){var t=this.props,n=t.formulaEnteringCell,r=n.xCoord,a=n.yCoord,o=t.cellValues,u=F(o,r,a),l=F(e.cellValues,r,a),c=u.formula,i=u.formula.arguments,s=l.formula.arguments,d=c.type;if(s.length!==i.length){var f=i.map(function(e){return"".concat(e.xCoord).concat(e.yCoord)});this.setState({value:"=".concat(d,"(").concat(f.join(", "),")")})}}}},{key:"render",value:function(){var e=this.state,t=e.value,n=e.focused;return o.a.createElement("td",{className:n?"focused":"",onClick:this.handleCellFocus,onKeyPress:this.handleKeyPress},n?o.a.createElement("input",{ref:this.inputRef,type:"text",value:t||"",onBlur:this.handleCellBlur,onChange:this.handleInputChange}):o.a.createElement("div",{style:{height:"100%"}},t))}}]),t}(a.Component),J=Object(c.b)(function(e){var t=e.toJS();return{focusedCell:t.focusedCell,cellValues:t.cellValues,formulaEnteringCell:t.formulaEnteringCell}},function(e){return{setFocus:function(t){return e(S(t))},removeFocus:function(t){return e(T(T))},setCellValue:function(t){return e(b(t))},setFormula:function(t){return e(N(t))},setFormulaArguments:function(t){return e(R(t))},setFormulaEnteringCell:function(t){return e(M(t))},unsetFormulaEnteringCell:function(t){return e(V())}}})(H),Z=function(e){var t=e.count,n=e.coord,r=new Array(t).fill(null,0,t-1);return o.a.createElement(a.Fragment,null,r.map(function(e,t){return o.a.createElement(J,{key:t,yCoord:n,xCoord:(r=t,String.fromCharCode(65+r))});var r}))},z=function(e){var t=e.verticalCellCount,n=e.horizontalCellCount,r=new Array(t).fill(null,0,t-1);return o.a.createElement("tbody",null,r.map(function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement(Z,{count:n,coord:t}))}))},W=(n(140),function(e){return o.a.createElement("table",{className:"table"},o.a.createElement(z,e))}),$=n(61),q=n(60),Q=(n(363),function(e){function t(){var e,n;Object(E.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).state={dataTypesEnum:x,inputValue:null,cellDataType:null},n.onSelectChange=function(e){var t=n.state.inputValue,r=n.props,a=r.focusedCell,o=a.xCoord,u=a.yCoord;(0,r.setCellValue)({xCoord:o,yCoord:u,dataType:e,value:t}),n.setState({cellDataType:e})},n.onInputChange=function(e){n.setState({inputValue:e})},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.focusedCell,n=e.cellValues,r=this.state,a=r.inputValue,o=r.cellDataType;if(t){var u=t.xCoord,l=t.yCoord,c=F(n,u,l);if(c){var i=c.dataType,s={};if(c.formula){var d=c.formula,f=d.type,p=d.arguments.map(function(e){return"".concat(e.xCoord).concat(e.yCoord)}).join(", "),C="".concat(f,"(").concat(p,")");this.state.inputValue!==C&&(s=Object($.a)({},s,{inputValue:C}))}else{var y=c.value;y!==a&&(s=Object($.a)({},s,{inputValue:y}))}i!==o&&(s=Object($.a)({},s,{cellDataType:i})),Object.keys(s).length>0&&this.setState(s)}else(this.state.inputValue||this.state.cellDataType)&&this.setState({inputValue:null,cellDataType:null})}}},{key:"render",value:function(){var e=this.props.focusedCell,t=e||{},n=t.xCoord,r=t.yCoord,a=e?"[".concat(n,", ").concat(r,"]"):null,u=this.state,l=u.cellDataType,c=u.inputValue,i=u.dataTypesEnum;return o.a.createElement("div",{className:"cell-state"},o.a.createElement("div",{className:"cell-coords"},o.a.createElement("span",null,a)),o.a.createElement("div",{className:"cell-value"},o.a.createElement(q.Input,{value:c,disabled:!e,onChange:this.onInputChange})),o.a.createElement("div",{className:"cell-data-type"}),o.a.createElement(q.Select,{placeholder:"Data type",disabled:!e,value:l,onChange:this.onSelectChange},i.map(function(e,t){return o.a.createElement(q.Select.Option,{key:t,label:e.value,value:e.key})})))}}]),t}(a.Component)),X=Object(c.b)(function(e){var t=e.toJS();return{focusedCell:t.focusedCell,cellValues:t.cellValues}},function(e){return{setCellValue:function(t){return e(b(t))}}})(Q),ee=(n(365),n(367),function(e){return o.a.createElement(_.a,null)}),te=(n(369),n(371),Object(c.b)()(function(e){return o.a.createElement("div",{className:"App"},o.a.createElement(X,null),o.a.createElement(W,{horizontalCellCount:10,verticalCellCount:10}),o.a.createElement(ee,null))}));l.a.render(o.a.createElement(c.a,{store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;return Object(i.createStore)(y,e,Object(s.composeWithDevTools)(Object(i.applyMiddleware)(d.a)))}()},o.a.createElement(te,null)),document.getElementById("root"))}},[[122,2,1]]]);
//# sourceMappingURL=main.ce977195.chunk.js.map